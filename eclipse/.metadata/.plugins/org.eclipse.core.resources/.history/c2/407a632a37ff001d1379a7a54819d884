package appu26j.mods.multiplayer;

import com.google.common.eventbus.Subscribe;

import appu26j.events.chat.EventChat;
import appu26j.interfaces.ModInterface;
import appu26j.mods.Category;
import appu26j.mods.Mod;
import net.minecraft.client.gui.GuiNewChat;
import net.minecraft.util.ChatComponentText;
import net.minecraft.util.EnumChatFormatting;

@ModInterface(name = "Rank Changer", description = "Changes your rank on the Hypixel server.", category = Category.MULTIPLAYER)
public class RankChanger extends Mod
{
    @Subscribe
    public void onChat(EventChat e)
    {
        GuiNewChat guiNewChat = this.mc.ingameGUI.getChatGUI();
        String message = e.getMessage().getFormattedText();
        e.setCancelled(true);
        
        if (message.contains(this.mc.thePlayer.getName()))
        {
            String[] parts = message.split(this.mc.thePlayer.getName(), this.mc.thePlayer.getName().length() * 2);
            String rank = EnumChatFormatting.RED + "[ADMIN]" + " ";
            String finalMessage = rank + this.mc.thePlayer.getName() + parts[1];
            guiNewChat.printChatMessageWithOptionalDeletionNoEvent(new ChatComponentText(finalMessage), 0);
        }
        
        else
        {
            guiNewChat.printChatMessageWithOptionalDeletionNoEvent(new ChatComponentText(message), 0);
        }
    }
}
